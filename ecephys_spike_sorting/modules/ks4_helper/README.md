ks4_helper
==============
Caller for Kilosort4. See the main readme for installation instructions.

This module auto-generates the channel map (reading from the SpikeGLX metadata file), and ks_params structure (reading parameters from the schema; these can be edited in create_input_json.py), 

Dependencies
------------
[Kilosort4](https://github.com/MouseLand/Kilosort)

Running
-------
```
python -m ecephys_spike_sorting.modules.ks4_helper --input_json <path to input json> --output_json <path to output json>
```
Two arguments must be included:
1. The location of an existing file in JSON format containing a list of paths and parameters.
2. The location to write a file in JSON format containing information generated by the module while it was run.

See the `_schemas.py` file for detailed information about the contents of the input JSON.

Input data
----------
- **AP band .bin file** : int16 binary file written by [SpikeGLX](https://github.com/billkarsh/spikeglx)
- **AP band .meta file** : metadata file written by [SpikeGLX](https://github.com/billkarsh/spikeglx)


Output data
-----------
- **Kilosort output files** : .npy files containing spike times, cluster labels, templates, etc. These are the input for phy.